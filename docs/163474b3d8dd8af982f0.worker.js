!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=11)}([function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(e.MAX_RADIUS=50,e.MAX_PARTICLES=1e3);e.MAX_NEIGHBORS=i*i},function(t,e,n){"use strict";e.__esModule=!0;var i=n(15),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e,n){t.exports=!n(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),u=i(r),o=n(2),a=i(o),s=n(6),c=function(t){return function(e){return function(n){for(var i="number"==typeof n,r=0,u=t.dimensions;r<u;r++){var o=t.getValue(r),a=i?n:n.getValue(r);t.setValue(r,e(o,a))}return t}}},f=function(){function t(e){(0,u.default)(this,t),this.add=c(this)(function(t,e){return t+e}),this.subtract=c(this)(function(t,e){return t-e}),this.multiply=c(this)(function(t,e){return t*e}),this.divide=c(this)(function(t,e){return t/e}),this.values=new Float32Array(e),this.dimensions=this.values.length}return(0,a.default)(t,[{key:"clone",value:function(){var e=new t(this.values);return e.magnitude=this.magnitude,e.magnitudeSq=this.magnitudeSq,e}},{key:"toArray",value:function(){return new Float32Array(this.values)}},{key:"getValue",value:function(t){return this.values[t]}},{key:"setValue",value:function(t,e){return this.values[t]=e,this.unsetCache(),this}},{key:"mutate",value:function(t){for(var e=0,n=this.dimensions;e<n;e++)this.values[e]=t(this.values[e],e);return this.unsetCache(),this}},{key:"randomize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.mutate(function(){return(0,s.random)(t)})}},{key:"radialRandomize",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=t*t,n=0,i=this.dimensions;n<i;n++){var r=Math.random()*Math.sqrt(e);e-=r*r,this.values[n]=(0,s.coinFlip)()?r:-r}return(0,s.shuffle)(this.values),this}},{key:"getMagnitude",value:function(){return void 0===this.magnitude&&(this.magnitude=Math.sqrt(this.getMagnitudeSq())),this.magnitude}},{key:"getMagnitudeSq",value:function(){if(void 0===this.magnitudeSq){for(var t=0,e=0,n=this.dimensions;e<n;e++)t+=this.values[e]*this.values[e];this.magnitudeSq=t}return this.magnitudeSq}},{key:"setMagnitude",value:function(t){var e=this.getMagnitude();return 0===e?this.add(Math.sqrt(t/this.dimensions)):this.multiply(t/e),this.cacheMagnitude(t),this}},{key:"limitMagnitude",value:function(t){var e=t*t,n=this.getMagnitudeSq();return n>e&&(this.multiply(e/n),this.cacheMagnitude(t)),this}},{key:"cacheMagnitude",value:function(t){this.magnitudeSq=t*t,this.magnitude=t}},{key:"unsetCache",value:function(){this.magnitudeSq=void 0,this.magnitude=void 0}}],[{key:"getAverage",value:function(e){if(0===e.length)throw new Error("Cannot average zero vectors");for(var n=e.length,i=e[0].dimensions,r=new t(i),u=0;u<n;u++)for(var o=0;o<i;o++){var a=r.values[o],s=e[u].values[u];r.values[o]=a+s/n}return r}}]),t}();e.default=f},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.RecentQueue=e.shuffle=e.clamp=e.random=e.coinFlip=void 0;var r=n(0),u=i(r),o=n(2),a=i(o),s=e.coinFlip=function(){return Math.random()<.5};e.random=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Math.random()*t;return s()?e:-e},e.clamp=function(t,e,n){return Math.max(e,Math.min(n,t))},e.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[n],t[n]=i}},e.RecentQueue=function(){function t(e){(0,u.default)(this,t),this.queue=[],this.limit=e}return(0,a.default)(t,[{key:"add",value:function(t){this.queue.unshift(t),this.queue.length>this.limit&&this.queue.pop()}},{key:"values",value:function(){return this.queue}}]),t}()},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(22),r=n(23),u=n(25),o=Object.defineProperty;e.f=n(3)?Object.defineProperty:function(t,e,n){if(i(t),e=u(e,!0),i(n),r)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(12),u=n(29),o=n(36),a=i(o),s=n(37),c=i(s),f=self,l={options:void 0,system:new c.default};f.addEventListener("message",function(t){if(t&&t.data&&t.data.type)switch(t.data.type){case"update":l.options=t.data.options,l.system.setPopulation(l.options.particles,l.options.dimensions),p();break;case"update.tick":p();break;case"destroy":f.close()}});var d=function(){l.options&&f.postMessage({type:"update",response:{dimensions:l.options.dimensions,particles:l.system.particles.map(function(t){return new a.default(t)}),neighborhood:l.system.getNeighborhoodMsg(l.options.neighborhood)}})},p=function(){if(l.options){l.system.particles.forEach(function(t){return t.acceleration.multiply(0)});var t=l.options.behavior;(0,r.behaviors[t.name])(l.system,t.config),l.system.particles.forEach(function(t){l.options&&(t.velocity.add(t.acceleration),t.velocity.limitMagnitude(l.options.max.speed),t.position.add(t.velocity))});(0,u.boundings[l.options.bounding])(l.system),l.system.recalculate(),d()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.behaviors=void 0;var i=n(13),r=n(14),u=n(27),o=n(28);e.behaviors={wandering:o.wandering,diffusion:i.diffusion,gravity:r.gravity,none:u.none}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.diffusion=function(t,e){if(!(t.particles.length<2)){var n=t.particles.length,i=n*n,r=e.charge*e.charge;t.particles.forEach(function(t){var e=t.neighbors[0],n=e.delta,u=e.distance,o=n.clone(),a=u?u*u:1;o.setMagnitude(r/a/i),t.acceleration.add(o)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gravity=void 0;var i=n(6);e.gravity=function(t,e){if(!(t.particles.length<2)){var n=t.particles.length,r=n*n,u=e.mass*e.mass;t.particles.forEach(function(t){var n=t.neighbors[0],o=n.delta,a=n.distance,s=o.clone(),c=(0,i.clamp)(a,10,100),f=c*c;s.setMagnitude(e.charge*u/f/r),t.acceleration.add(s)})}}},function(t,e,n){t.exports={default:n(16),__esModule:!0}},function(t,e,n){n(17);var i=n(8).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){var i=n(18);i(i.S+i.F*!n(3),"Object",{defineProperty:n(9).f})},function(t,e,n){var i=n(7),r=n(8),u=n(19),o=n(21),a=function(t,e,n){var s,c,f,l=t&a.F,d=t&a.G,p=t&a.S,h=t&a.P,v=t&a.B,g=t&a.W,y=d?r:r[e]||(r[e]={}),m=y.prototype,_=d?i:p?i[e]:(i[e]||{}).prototype;d&&(n=e);for(s in n)(c=!l&&_&&void 0!==_[s])&&s in y||(f=c?_[s]:n[s],y[s]=d&&"function"!=typeof _[s]?n[s]:v&&c?u(f,i):g&&_[s]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):h&&"function"==typeof f?u(Function.call,f):f,h&&((y.virtual||(y.virtual={}))[s]=f,t&a.R&&m&&!m[s]&&o(m,s,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,n){var i=n(20);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(9),r=n(26);t.exports=n(3)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(5);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(3)&&!n(10)(function(){return 7!=Object.defineProperty(n(24)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(5),r=n(7).document,u=i(r)&&i(r.createElement);t.exports=function(t){return u?r.createElement(t):{}}},function(t,e,n){var i=n(5);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.none=function(t,e){t.particles.forEach(function(t){return t.velocity.multiply(0)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wandering=void 0;var i=n(4),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.wandering=function(t,e){t.particles.forEach(function(t){var n=new r.default(t.dimensions);n.randomize(e.jitter),t.acceleration.add(n)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.boundings=void 0;var i=n(30),r=n(31),u=n(32),o=n(33),a=n(34),s=n(35);e.boundings={centering:r.centering,scaling:a.scaling,centerScaling:u.centerScaling,binding:i.binding,wrapping:s.wrapping,none:o.none}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.binding=void 0;var i=n(1);e.binding=function(t){t.particles.forEach(function(t){return t.position.setMagnitude(i.MAX_RADIUS)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.centering=void 0;var i=n(4),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.centering=function(t){if(!(t.particles.length<1)){var e=t.particles.map(function(t){return t.position}),n=r.default.getAverage(e);t.particles.forEach(function(t){return t.position.subtract(n)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.centerScaling=void 0;var i=n(1),r=i.MAX_RADIUS*i.MAX_RADIUS;e.centerScaling=function(t){if(!(t.particles.length<1)){var e=t.particles.reduce(function(t,e){return Math.max(t,e.position.getMagnitudeSq())},-1);if(!(e<=r)){var n=r/e;t.particles.forEach(function(t){return t.position.multiply(n)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.none=function(t){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scaling=void 0;var i=n(1),r=n(4),u=function(t){return t&&t.__esModule?t:{default:t}}(r),o=i.MAX_RADIUS*i.MAX_RADIUS;e.scaling=function(t){if(!(t.particles.length<2)){var e=t.particles.map(function(t){return t.position}),n=u.default.getAverage(e),i=e.reduce(function(t,e){var i=e.clone().subtract(n),r=i.getMagnitudeSq();return Math.max(t,r)},-1);if(!(i<=o)){var r=o/i;t.particles.forEach(function(t){return t.position.multiply(r)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapping=void 0;var i=n(1),r=function(t){return t<-i.MAX_RADIUS?i.MAX_RADIUS:t>i.MAX_RADIUS?-i.MAX_RADIUS:t};e.wrapping=function(t){t.particles.forEach(function(t){return t.position.mutate(r)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i),u=function t(e){var n=e.dimensions,i=e.position,u=e.velocity,o=e.acceleration;(0,r.default)(this,t),this.dimensions=n,this.position=i.toArray(),this.velocity=u.toArray(),this.acceleration=o.toArray()};e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),u=i(r),o=n(2),a=i(o),s=n(1),c=n(38),f=i(c),l=function(){function t(){(0,u.default)(this,t),this.particles=[]}return(0,a.default)(t,[{key:"setPopulation",value:function(t,e){var n=this.particles,i=new Array(t).fill(null).map(function(t,i){var r=new f.default(e);return n[i]?r.fill(n[i]):r.randomize(s.MAX_RADIUS),r});this.particles=i,this.recalculate()}},{key:"recalculate",value:function(){var t=this;this.particles.forEach(function(e){e.neighbors=[],t.particles.forEach(function(t,n){if(e!==t){var i=e.position.clone().subtract(t.position),r=i.getMagnitude();e.neighbors.push({index:n,delta:i,distance:r})}}),e.neighbors.sort(function(t,e){return t.distance-e.distance})})}},{key:"getNeighborhoodMsg",value:function(t){switch(t.name){case"all":return this.particles.map(function(t){return t.neighbors.map(function(t){return d(t)})});case"locals":return this.particles.map(function(t){return t.neighbors.slice(0,t.dimensions).map(function(t){return d(t)})});case"nearest":return this.particles.map(function(t){return t.neighbors.slice(0,1).map(function(t){return d(t)})});case"proximity":throw new Error("TODO: proximity neighborhood")}}}]),t}();e.default=l;var d=function(t){return{index:t.index,delta:t.delta.toArray(),distance:t.distance}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),u=i(r),o=n(2),a=i(o),s=n(4),c=i(s),f=function(){function t(e){(0,u.default)(this,t),this.dimensions=e,this.position=new c.default(e),this.velocity=new c.default(e),this.acceleration=new c.default(e),this.neighbors=[]}return(0,a.default)(t,[{key:"randomize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.position.radialRandomize(t),this.velocity.randomize(t),this.acceleration.randomize(t),this}},{key:"fill",value:function(t){return this.position.mutate(function(e,n){return t.position.getValue(n)||e}),this.velocity.mutate(function(e,n){return t.velocity.getValue(n)||e}),this.acceleration.mutate(function(e,n){return t.acceleration.getValue(n)||e}),this}}]),t}();e.default=f}]);
//# sourceMappingURL=163474b3d8dd8af982f0.worker.js.map